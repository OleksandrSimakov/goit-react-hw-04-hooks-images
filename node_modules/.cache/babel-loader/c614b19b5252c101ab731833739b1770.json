{"ast":null,"code":"var _jsxFileName = \"/Users/sima/Documents/GitHub/goit-react-hw-04-hooks-images/src/components/App/App.jsx\",\n    _s = $RefreshSig$();\n\nimport '../App/App.css';\nimport { useState, useEffect, useRef } from 'react';\nimport Searchbar from '../Searchbar/Searchbar';\nimport { fetchImages } from '../../services/fetchImages';\nimport ImageGallery from '../ImageGallery/ImageGallery';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport Button from '../Button/Button';\nimport scrollTo from '../../services/scrollTo.js';\nimport Spinner from '../Loader/Loader';\nimport Modal from '../Modal/Modal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n\n  const styles = {\n    img: {\n      maxWidth: 'calc(100vw - 48px)',\n      maxHeight: 'calc(100vh - 24px)'\n    }\n  };\n  const [searchQuery, setSearchQuery] = useState(null);\n  const [queryStatus, setQueryStatus] = useState('idle');\n  const [images, setImages] = useState([]);\n  const [currentPage, setCurrentPage] = useState(null);\n  const [selectedImageSrc, setSelectedImageSrc] = useState(null);\n  const [selectedImageTags, setSelectedImageTags] = useState(null);\n  const [modalOpened, setModalOpened] = useState(false);\n\n  const handleSubmit = searchQuery => {\n    setSearchQuery(searchQuery);\n    setCurrentPage(1);\n  };\n\n  const isFirstRender = useRef(true);\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    try {\n      setQueryStatus('pending');\n      fetchImages(searchQuery, currentPage).then(result => {\n        setImages([...result]);\n        scrollTo();\n        setQueryStatus('resolved');\n      }).catch(error => console.log(error));\n    } catch (error) {\n      setQueryStatus('rejected');\n    }\n  }, [currentPage, searchQuery]); //   async function componentDidUpdate(_, prevState) {\n  //     const { searchQuery, currentPage } = this.state\n  // const shouldFetch =\n  //   (prevState.searchQuery !== searchQuery && searchQuery !== '') ||\n  //   prevState.currentPage !== currentPage\n  //     if (shouldFetch) {\n  //       try {\n  //         this.setState({ queryStatus: 'pending' })\n  //         const images = await fetchImages(searchQuery, currentPage)\n  //         this.setState((prevState) => ({\n  //           queryStatus: 'resolved',\n  //           images: [...prevState.images, ...images],\n  //         }))\n  //         scrollTo()\n  //       } catch (error) {\n  //         this.setState({ reqStatus: 'rejected' })\n  //       }\n  //     }\n  //   }\n\n  const handleMoreBtnClick = e => {\n    e.preventDefault();\n    setCurrentPage(prevState => prevState.currentPage + 1);\n  };\n\n  const handleImgClick = (largeImageURL, tags) => {\n    setSelectedImageSrc(largeImageURL);\n    setSelectedImageTags(tags);\n    setModalOpened(true);\n  };\n\n  const closeModal = () => {\n    setModalOpened(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Searchbar, {\n      onSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ImageGallery, {\n      children: images.map(({\n        id,\n        webformatURL,\n        tags,\n        largeImageURL\n      }) => /*#__PURE__*/_jsxDEV(ImageGalleryItem, {\n        webformatURL: webformatURL,\n        tags: tags,\n        onImgClick: () => handleImgClick(largeImageURL, tags)\n      }, id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), queryStatus === 'resolved' && /*#__PURE__*/_jsxDEV(Button, {\n      handleMoreBtnClick: handleMoreBtnClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this), queryStatus === 'pending' && /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 37\n    }, this), modalOpened && /*#__PURE__*/_jsxDEV(Modal, {\n      onClose: closeModal,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        style: styles.img,\n        src: selectedImageSrc,\n        alt: selectedImageTags\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n} // export default class App extends Component {\n//   state = {\n//     searchQuery: null,\n//     queryStatus: 'idle',\n//     images: [],\n//     currentPage: null,\n//     selectedImageSrc: null,\n//     selectedImageTags: null,\n//     modalOpened: false,\n//   }\n//   styles = {\n//     img: {\n//       maxWidth: 'calc(100vw - 48px)',\n//       maxHeight: 'calc(100vh - 24px)',\n//     },\n//   }\n//   handleSubmit = (searchQuery) => {\n//     this.setState({ searchQuery, currentPage: 1 })\n//   }\n//   async componentDidUpdate(_, prevState) {\n//     const { searchQuery, currentPage } = this.state\n//     const shouldFetch =\n//       (prevState.searchQuery !== searchQuery && searchQuery !== '') ||\n//       prevState.currentPage !== currentPage\n//     if (shouldFetch) {\n//       try {\n//         this.setState({ queryStatus: 'pending' })\n//         const images = await fetchImages(searchQuery, currentPage)\n//         this.setState((prevState) => ({\n//           queryStatus: 'resolved',\n//           images: [...prevState.images, ...images],\n//         }))\n//         scrollTo()\n//       } catch (error) {\n//         this.setState({ reqStatus: 'rejected' })\n//       }\n//     }\n//   }\n//   handleMoreBtnClick = (e) => {\n//     e.preventDefault()\n//     this.setState((prevState) => ({\n//       currentPage: prevState.currentPage + 1,\n//     }))\n//   }\n//   handleImgClick = (largeImageURL, tags) => {\n//     this.setState({\n//       selectedImageSrc: largeImageURL,\n//       selectedImageTags: tags,\n//       modalOpened: true,\n//     })\n//   }\n//   closeModal = () => {\n//     this.setState({ modalOpened: false })\n//   }\n//   render() {\n//     const {\n//       images,\n//       queryStatus,\n//       selectedImageSrc,\n//       selectedImageTags,\n//       modalOpened,\n//     } = this.state\n//     return (\n//       <>\n//         <Searchbar onSubmit={this.handleSubmit} />\n//         <ImageGallery>\n//           {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n//             <ImageGalleryItem\n//               key={id}\n//               webformatURL={webformatURL}\n//               tags={tags}\n//               onImgClick={() => this.handleImgClick(largeImageURL, tags)}\n//             />\n//           ))}\n//         </ImageGallery>\n//         {queryStatus === 'resolved' && (\n//           <Button handleMoreBtnClick={this.handleMoreBtnClick} />\n//         )}\n//         {queryStatus === 'pending' && <Spinner />}\n//         {modalOpened && (\n//           <Modal onClose={this.closeModal}>\n//             <img\n//               style={this.styles.img}\n//               src={selectedImageSrc}\n//               alt={selectedImageTags}\n//             />\n//           </Modal>\n//         )}\n//       </>\n//     )\n//   }\n// }\n\n_s(App, \"ZUK2LrTSQjmX0D2jV6qHPo8xDYs=\");\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/sima/Documents/GitHub/goit-react-hw-04-hooks-images/src/components/App/App.jsx"],"names":["useState","useEffect","useRef","Searchbar","fetchImages","ImageGallery","ImageGalleryItem","Button","scrollTo","Spinner","Modal","App","styles","img","maxWidth","maxHeight","searchQuery","setSearchQuery","queryStatus","setQueryStatus","images","setImages","currentPage","setCurrentPage","selectedImageSrc","setSelectedImageSrc","selectedImageTags","setSelectedImageTags","modalOpened","setModalOpened","handleSubmit","isFirstRender","current","then","result","catch","error","console","log","handleMoreBtnClick","e","preventDefault","prevState","handleImgClick","largeImageURL","tags","closeModal","map","id","webformatURL"],"mappings":"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","sourcesContent":["import '../App/App.css'\nimport { useState, useEffect, useRef } from 'react'\nimport Searchbar from '../Searchbar/Searchbar'\nimport { fetchImages } from '../../services/fetchImages'\nimport ImageGallery from '../ImageGallery/ImageGallery'\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem'\nimport Button from '../Button/Button'\nimport scrollTo from '../../services/scrollTo.js'\nimport Spinner from '../Loader/Loader'\nimport Modal from '../Modal/Modal'\n\nexport default function App() {\n  const styles = {\n    img: {\n      maxWidth: 'calc(100vw - 48px)',\n      maxHeight: 'calc(100vh - 24px)',\n    },\n  }\n\n  const [searchQuery, setSearchQuery] = useState(null)\n  const [queryStatus, setQueryStatus] = useState('idle')\n  const [images, setImages] = useState([])\n  const [currentPage, setCurrentPage] = useState(null)\n  const [selectedImageSrc, setSelectedImageSrc] = useState(null)\n  const [selectedImageTags, setSelectedImageTags] = useState(null)\n  const [modalOpened, setModalOpened] = useState(false)\n\n  const handleSubmit = (searchQuery) => {\n    setSearchQuery(searchQuery)\n    setCurrentPage(1)\n  }\n\n  const isFirstRender = useRef(true)\n\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false\n      return\n    }\n\n    try {\n      setQueryStatus('pending')\n\n      fetchImages(searchQuery, currentPage)\n        .then((result) => {\n          setImages([...result])\n          scrollTo()\n          setQueryStatus('resolved')\n        })\n        .catch((error) => console.log(error))\n    } catch (error) {\n      setQueryStatus('rejected')\n    }\n  }, [currentPage, searchQuery])\n\n  //   async function componentDidUpdate(_, prevState) {\n  //     const { searchQuery, currentPage } = this.state\n\n  // const shouldFetch =\n  //   (prevState.searchQuery !== searchQuery && searchQuery !== '') ||\n  //   prevState.currentPage !== currentPage\n\n  //     if (shouldFetch) {\n  //       try {\n  //         this.setState({ queryStatus: 'pending' })\n\n  //         const images = await fetchImages(searchQuery, currentPage)\n\n  //         this.setState((prevState) => ({\n  //           queryStatus: 'resolved',\n  //           images: [...prevState.images, ...images],\n  //         }))\n\n  //         scrollTo()\n  //       } catch (error) {\n  //         this.setState({ reqStatus: 'rejected' })\n  //       }\n  //     }\n  //   }\n\n  const handleMoreBtnClick = (e) => {\n    e.preventDefault()\n\n    setCurrentPage((prevState) => prevState.currentPage + 1)\n  }\n\n  const handleImgClick = (largeImageURL, tags) => {\n    setSelectedImageSrc(largeImageURL)\n    setSelectedImageTags(tags)\n    setModalOpened(true)\n  }\n\n  const closeModal = () => {\n    setModalOpened(false)\n  }\n  return (\n    <>\n      <Searchbar onSubmit={handleSubmit} />\n\n      <ImageGallery>\n        {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n          <ImageGalleryItem\n            key={id}\n            webformatURL={webformatURL}\n            tags={tags}\n            onImgClick={() => handleImgClick(largeImageURL, tags)}\n          />\n        ))}\n      </ImageGallery>\n\n      {queryStatus === 'resolved' && (\n        <Button handleMoreBtnClick={handleMoreBtnClick} />\n      )}\n\n      {queryStatus === 'pending' && <Spinner />}\n\n      {modalOpened && (\n        <Modal onClose={closeModal}>\n          <img\n            style={styles.img}\n            src={selectedImageSrc}\n            alt={selectedImageTags}\n          />\n        </Modal>\n      )}\n    </>\n  )\n}\n\n// export default class App extends Component {\n//   state = {\n//     searchQuery: null,\n//     queryStatus: 'idle',\n//     images: [],\n//     currentPage: null,\n//     selectedImageSrc: null,\n//     selectedImageTags: null,\n//     modalOpened: false,\n//   }\n\n//   styles = {\n//     img: {\n//       maxWidth: 'calc(100vw - 48px)',\n//       maxHeight: 'calc(100vh - 24px)',\n//     },\n//   }\n\n//   handleSubmit = (searchQuery) => {\n//     this.setState({ searchQuery, currentPage: 1 })\n//   }\n\n//   async componentDidUpdate(_, prevState) {\n//     const { searchQuery, currentPage } = this.state\n\n//     const shouldFetch =\n//       (prevState.searchQuery !== searchQuery && searchQuery !== '') ||\n//       prevState.currentPage !== currentPage\n\n//     if (shouldFetch) {\n//       try {\n//         this.setState({ queryStatus: 'pending' })\n\n//         const images = await fetchImages(searchQuery, currentPage)\n\n//         this.setState((prevState) => ({\n//           queryStatus: 'resolved',\n//           images: [...prevState.images, ...images],\n//         }))\n\n//         scrollTo()\n//       } catch (error) {\n//         this.setState({ reqStatus: 'rejected' })\n//       }\n//     }\n//   }\n\n//   handleMoreBtnClick = (e) => {\n//     e.preventDefault()\n\n//     this.setState((prevState) => ({\n//       currentPage: prevState.currentPage + 1,\n//     }))\n//   }\n\n//   handleImgClick = (largeImageURL, tags) => {\n//     this.setState({\n//       selectedImageSrc: largeImageURL,\n//       selectedImageTags: tags,\n//       modalOpened: true,\n//     })\n//   }\n\n//   closeModal = () => {\n//     this.setState({ modalOpened: false })\n//   }\n\n//   render() {\n//     const {\n//       images,\n//       queryStatus,\n//       selectedImageSrc,\n//       selectedImageTags,\n//       modalOpened,\n//     } = this.state\n\n//     return (\n//       <>\n//         <Searchbar onSubmit={this.handleSubmit} />\n\n//         <ImageGallery>\n//           {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n//             <ImageGalleryItem\n//               key={id}\n//               webformatURL={webformatURL}\n//               tags={tags}\n//               onImgClick={() => this.handleImgClick(largeImageURL, tags)}\n//             />\n//           ))}\n//         </ImageGallery>\n\n//         {queryStatus === 'resolved' && (\n//           <Button handleMoreBtnClick={this.handleMoreBtnClick} />\n//         )}\n\n//         {queryStatus === 'pending' && <Spinner />}\n\n//         {modalOpened && (\n//           <Modal onClose={this.closeModal}>\n//             <img\n//               style={this.styles.img}\n//               src={selectedImageSrc}\n//               alt={selectedImageTags}\n//             />\n//           </Modal>\n//         )}\n//       </>\n//     )\n//   }\n// }\n"]},"metadata":{},"sourceType":"module"}