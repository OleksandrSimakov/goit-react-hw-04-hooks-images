{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sima/Documents/GitHub/goit-react-hw-03-image-finder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/sima/Documents/GitHub/goit-react-hw-03-image-finder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/sima/Documents/GitHub/goit-react-hw-03-image-finder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/sima/Documents/GitHub/goit-react-hw-03-image-finder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sima/Documents/GitHub/goit-react-hw-03-image-finder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sima/Documents/GitHub/goit-react-hw-03-image-finder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sima/Documents/GitHub/goit-react-hw-03-image-finder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import'../App/App.css';import React,{Component}from'react';import Searchbar from'../Searchbar/Searchbar';import{fetchImages}from'../../services/fetchImages';import ImageGallery from'../ImageGallery/ImageGallery';import ImageGalleryItem from'../ImageGalleryItem/ImageGalleryItem';import Button from'../Button/Button';import scrollTo from'../../services/scrollTo.js';import Spinner from'../Loader/Loader';import Modal from'../Modal/Modal';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={searchQuery:null,queryStatus:'idle',images:[],currentPage:null,selectedImageSrc:null,selectedImageTags:null};_this.handleSubmit=function(searchQuery){_this.setState({searchQuery:searchQuery,currentPage:1});};_this.handleMoreBtnClick=function(e){e.preventDefault();_this.setState(function(prevState){return{currentPage:prevState.currentPage+1};});};_this.handleImgClick=function(largeImageURL,tags){_this.setState({selectedImageSrc:largeImageURL,selectedImageTags:tags});};return _this;}_createClass(App,[{key:\"componentDidUpdate\",value:function(){var _componentDidUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_,prevState){var _this$state,searchQuery,currentPage,shouldFetch,images;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=this.state,searchQuery=_this$state.searchQuery,currentPage=_this$state.currentPage;shouldFetch=prevState.searchQuery!==searchQuery&&searchQuery!==''||prevState.currentPage!==currentPage;if(!shouldFetch){_context.next=15;break;}_context.prev=3;this.setState({queryStatus:'pending'});_context.next=7;return fetchImages(searchQuery,currentPage);case 7:images=_context.sent;this.setState(function(prevState){return{queryStatus:'resolved',images:[].concat(_toConsumableArray(prevState.images),_toConsumableArray(images))};});scrollTo();_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](3);this.setState({reqStatus:'rejected'});case 15:case\"end\":return _context.stop();}}},_callee,this,[[3,12]]);}));function componentDidUpdate(_x,_x2){return _componentDidUpdate.apply(this,arguments);}return componentDidUpdate;}()},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,images=_this$state2.images,queryStatus=_this$state2.queryStatus,selectedImageSrc=_this$state2.selectedImageSrc,selectedImageTags=_this$state2.selectedImageTags;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Searchbar,{onSubmit:this.handleSubmit}),/*#__PURE__*/_jsx(ImageGallery,{children:images.map(function(_ref){var id=_ref.id,webformatURL=_ref.webformatURL,tags=_ref.tags,largeImageURL=_ref.largeImageURL;return/*#__PURE__*/_jsx(ImageGalleryItem,{webformatURL:webformatURL,tags:tags,onImgClick:function onImgClick(){return _this2.handleImgClick(largeImageURL,tags);}},id);})}),queryStatus==='resolved'&&/*#__PURE__*/_jsx(Button,{handleMoreBtnClick:this.handleMoreBtnClick}),queryStatus==='pending'&&/*#__PURE__*/_jsx(Spinner,{}),selectedImageSrc&&/*#__PURE__*/_jsx(Modal,{largeImageURL:selectedImageSrc,tags:selectedImageTags})]});}}]);return App;}(Component);export{App as default};","map":{"version":3,"sources":["/Users/sima/Documents/GitHub/goit-react-hw-03-image-finder/src/components/App/App.js"],"names":["React","Component","Searchbar","fetchImages","ImageGallery","ImageGalleryItem","Button","scrollTo","Spinner","Modal","App","state","searchQuery","queryStatus","images","currentPage","selectedImageSrc","selectedImageTags","handleSubmit","setState","handleMoreBtnClick","e","preventDefault","prevState","handleImgClick","largeImageURL","tags","_","shouldFetch","reqStatus","map","id","webformatURL"],"mappings":"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","sourcesContent":["import '../App/App.css'\nimport React, { Component } from 'react'\nimport Searchbar from '../Searchbar/Searchbar'\nimport { fetchImages } from '../../services/fetchImages'\nimport ImageGallery from '../ImageGallery/ImageGallery'\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem'\nimport Button from '../Button/Button'\nimport scrollTo from '../../services/scrollTo.js'\nimport Spinner from '../Loader/Loader'\nimport Modal from '../Modal/Modal'\n\nexport default class App extends Component {\n  state = {\n    searchQuery: null,\n    queryStatus: 'idle',\n    images: [],\n    currentPage: null,\n    selectedImageSrc: null,\n    selectedImageTags: null,\n  }\n\n  handleSubmit = (searchQuery) => {\n    this.setState({ searchQuery, currentPage: 1 })\n  }\n\n  async componentDidUpdate(_, prevState) {\n    const { searchQuery, currentPage } = this.state\n\n    const shouldFetch =\n      (prevState.searchQuery !== searchQuery && searchQuery !== '') ||\n      prevState.currentPage !== currentPage\n\n    if (shouldFetch) {\n      try {\n        this.setState({ queryStatus: 'pending' })\n\n        const images = await fetchImages(searchQuery, currentPage)\n\n        this.setState((prevState) => ({\n          queryStatus: 'resolved',\n          images: [...prevState.images, ...images],\n        }))\n\n        scrollTo()\n      } catch (error) {\n        this.setState({ reqStatus: 'rejected' })\n      }\n    }\n  }\n\n  handleMoreBtnClick = (e) => {\n    e.preventDefault()\n\n    this.setState((prevState) => ({\n      currentPage: prevState.currentPage + 1,\n    }))\n  }\n\n  handleImgClick = (largeImageURL, tags) => {\n    this.setState({ selectedImageSrc: largeImageURL, selectedImageTags: tags })\n  }\n\n  render() {\n    const {\n      images,\n      queryStatus,\n      selectedImageSrc,\n      selectedImageTags,\n    } = this.state\n\n    return (\n      <>\n        <Searchbar onSubmit={this.handleSubmit} />\n\n        <ImageGallery>\n          {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n            <ImageGalleryItem\n              key={id}\n              webformatURL={webformatURL}\n              tags={tags}\n              onImgClick={() => this.handleImgClick(largeImageURL, tags)}\n            />\n          ))}\n        </ImageGallery>\n\n        {queryStatus === 'resolved' && (\n          <Button handleMoreBtnClick={this.handleMoreBtnClick} />\n        )}\n\n        {queryStatus === 'pending' && <Spinner />}\n\n        {selectedImageSrc && (\n          <Modal largeImageURL={selectedImageSrc} tags={selectedImageTags} />\n        )}\n      </>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}